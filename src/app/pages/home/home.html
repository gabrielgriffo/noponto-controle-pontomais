<header class="header">
  <div class="header-left">
    <div class="logo-container">
      <div class="i icon-foco"></div>
      <span class="logo-text">No Ponto</span>
    </div>
  </div>
  <div class="header-right">
    <button class="icon-button settings" (click)="onSettingsClick()">
      <span class="icon-settings"></span>
    </button>
    <button class="icon-button" (click)="onMinimizeClick()">
      <span class="icon-minimize"></span>
    </button>
    <button class="icon-button close" (click)="onCloseClick()">
      <span class="icon-close"></span>
    </button>
  </div>
</header>

<main class="main-content">
  <section class="time-actions">
    <div class="time-inputs">

      <div class="time-entry">
        <label for="checkIn" class="time-label">Entrada</label>
        <div class="time-input">
          <div class="form">
            <input class="input" id="checkIn" placeholder="HH:MM" type="text" autocomplete="off"
              maxlength="5" appTimeInput #checkInInput />
          </div>
        </div>
      </div>
      <div class="time-entry">
        <label for="checkOut" class="time-label">Saída</label>
        <div class="time-input">
          <div class="form">
            <input class="input" id="checkOut" placeholder="HH:MM" type="text" autocomplete="off"
              maxlength="5" appTimeInput #checkOutInput />
          </div>
        </div>
      </div>
      <div class="time-entry">
        <label for="checkIn2" class="time-label">Entrada</label>
        <div class="time-input">
          <div class="form">
            <input class="input" id="checkIn2" placeholder="HH:MM" type="text" autocomplete="off"
              maxlength="5" appTimeInput #checkIn2Input />
          </div>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn-secondary" (click)="onImportClick()">
        Importar
        <span class="icon-download"></span>
      </button>
      <button class="btn-primary" (click)="onStartMonitoringClick()">
        Iniciar Monitoramento
        <span class="icon-bell"></span>
      </button>
    </div>
  </section>

  <div class="metrics-container">
    <section class="metrics-section">
      <div class="metrics-line">
        <div class="metric-focus">
          <div class="metric-label">Tempo Trabalhado</div>
          <div class="metric-focus-value">
            <app-flip-text [text]="workedTime | timeFormat:'duration'" [fontSize]="48" [grayPrefix]="'00h'"></app-flip-text>
          </div>
        </div>
      </div>
    </section>

    <section class="progress-section">
      <div class="progress-header">
        <span class="progress-title">Progresso Total da Jornada</span>
      </div>
      <div class="progress-content">
        <div class="progress-bar">
          <div class="progress-fill animated" [style.width.%]="progressPercentageValue"></div>
        </div>
        <span class="progress-percentage">{{ progressPercentageValue.toFixed(1).replace('.', ',') }}%</span>
      </div>
    </section>

    <section class="work-periods">
      <div class="work-periods-title">Períodos de Trabalho</div>
      <div class="periods-container">
        <div class="periods-back-bar">
          <div class="period-item" [style.width.%]="firstPeriodPercentage" *ngIf="isMonitoring && hasFirstPeriod">
            <div class="period-bar" [ngClass]="hasSecondPeriod ? 'period-ended' : 'period-green animated'"></div>
            <span class="period-label">{{ firstPeriodTime | timeFormat:'duration' }}</span>
          </div>
          <div class="period-item" [style.width.%]="secondPeriodPercentage" *ngIf="isMonitoring && hasSecondPeriod">
            <div class="period-bar period-green animated"></div>
            <span class="period-label">{{ secondPeriodTime | timeFormat:'duration' }}</span>
          </div>
        </div>
      </div>
    </section>

    <section class="metrics-section">
      <div class="metrics-line">
        <div class="metric-card">
          <div class="metric-label">Tempo Restante</div>
          <div class="metric-value">
            <app-flip-text [text]="remainingTime | timeFormat:'duration'" [fontSize]="18" [grayPrefix]="'00h'"></app-flip-text>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Fim do Expediente</div>
          <div class="metric-value-ended">{{ endTime | timeFormat:'clock' }}</div>
        </div>
      </div>
    </section>

    <div class="metrics-empty-state" *ngIf="!isMonitoring">
      <div class="empty-state-content">
        <p class="empty-state-text">Insira os horários e <span class="highlight-green">inicie o monitoramento</span> para visualizar suas métricas.</p>
      </div>
    </div>
  </div>

  <section class="status-footer">
    <div class="status-item">
      <span class="status-label">Importação Automática</span>
      <span class="status-value success">10m</span>
    </div>
    <div class="status-item">
      <span class="status-label">Alarme</span>
      <span class="status-value success">Ok</span>
    </div>
    <div class="status-item">
      <span class="status-label">Notificação</span>
      <span class="status-value disabled">Desativada</span>
    </div>
    <div class="status-item">
      <span class="status-label">Conexão com PontoMais</span>
      <span class="status-value success">Ok</span>
    </div>
  </section>
</main>

<!-- Settings Modal -->
<app-settings-modal [isOpen]="showSettingsModal" (close)="onCloseSettingsModal()"></app-settings-modal>